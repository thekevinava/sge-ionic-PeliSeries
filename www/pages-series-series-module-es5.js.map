{"version":3,"sources":["webpack:///src/app/pages/serie/serie.page.html","webpack:///src/app/pages/series/series.page.html","webpack:///src/app/pages/serie/serie.page.scss","webpack:///src/app/pages/serie/serie.page.ts","webpack:///src/app/pages/series/series-routing.module.ts","webpack:///src/app/pages/series/series.module.ts","webpack:///src/app/pages/series/series.page.scss","webpack:///src/app/pages/series/series.page.ts"],"names":["SeriePage","route","dataService","alertCtrl","toastController","router","userData","usuario","slug","email","puntuacion","comentario","fecha","Date","now","comentariosSerie","cardSerie","cardForm","cardComentarios","slideOpts","initialSlide","slidesPerView","autoplay","categorias","series","puntuaciones","getUsername","getCategorias","subscribe","res","getSeries","serieSlug","snapshot","paramMap","get","i","length","serie","getComentarios","push","sort","a","b","then","username","cat","name","catSlug","slugSerie","postComentario","response","visualizaciones","mostrarToast","create","message","duration","toast","present","date","getDate","getMonth","getFullYear","getHours","getMinutes","ficha","form","comens","total","item","deleteComment","id","mostrarToast2","selector","template","routes","path","children","component","loadChildren","m","SeriePageModule","SeriesPageRoutingModule","imports","forChild","exports","SeriesPageModule","declarations","SeriesPage"],"mappings":"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","file":"pages-series-series-module-es5.js","sourcesContent":["export default \"<app-header [hidden]=\\\"cardSerie\\\" titulo=\\\"{{serie?.title}}\\\"></app-header>\\n\\n<ion-content>\\n    <ion-card [hidden]=\\\"cardSerie\\\">\\n        <ion-slides [options]=\\\"slideOpts\\\" pager=\\\"true\\\">\\n            <ion-slide *ngFor=\\\"let s of serie?.images\\\">\\n                <ion-img [src]=\\\"s\\\"></ion-img>\\n            </ion-slide>\\n        </ion-slides>\\n        <ion-list>\\n            <ion-card-header>\\n                <ion-card-title color=\\\"warning\\\">{{ serie?.title }}</ion-card-title>\\n                <ng-container *ngFor=\\\"let cat of serie?.categories;\\\">\\n                    <ion-chip *ngIf=\\\"mismaCategoria(cat)\\\" routerLink=\\\"/categories/{{catSlug}}\\\" color=\\\"danger\\\">\\n                        {{ cat }}\\n                    </ion-chip>\\n                </ng-container>\\n            </ion-card-header>\\n            <ion-card-content>\\n                <ion-item>\\n                    <ion-button (click)=\\\"visualizaciones(true,false,true)\\\" slot=\\\"start\\\">Puntuar</ion-button>\\n                    <ion-button (click)=\\\"visualizaciones(true,true,false)\\\" slot=\\\"end\\\">Ver Comentarios</ion-button>\\n                </ion-item>\\n                <ion-item>\\n                    Puntuación\\n                    <ion-badge style=\\\"margin-left: 20px;\\\" color=\\\"verdecito\\\">{{puntuacionTotal()}}</ion-badge>\\n                </ion-item>\\n                <ion-item>\\n                    <ion-label color=\\\"secondary\\\">Año de emisión: {{serie?.year}}</ion-label>\\n                </ion-item>\\n                <ion-item>\\n                    <ion-label color=\\\"primary\\\" style=\\\"font-size: 30px;\\\">Sinopsis:</ion-label>\\n                </ion-item>\\n                <ion-item>\\n                    {{serie?.sinopsis}}\\n                </ion-item>\\n                <ion-item>\\n                    <ion-label class=\\\"center\\\" color=\\\"tertiary\\\">Temporadas: {{serie?.seasons}}</ion-label>\\n                    <ion-label class=\\\"center\\\" color=\\\"tertiary\\\">Capítulos: {{serie?.episodes}}</ion-label>\\n                </ion-item>\\n            </ion-card-content>\\n        </ion-list>\\n    </ion-card>\\n\\n\\n    <ion-card [hidden]=\\\"cardForm\\\">\\n        <ion-card-header>\\n            <ion-card-title>Puntua la serie</ion-card-title>\\n            <ion-card-subtitle>Añade una puntuación a {{serie?.title}}</ion-card-subtitle>\\n        </ion-card-header>\\n        <ion-card-content>\\n            <form #formulario=\\\"ngForm\\\">\\n                <ion-list>\\n                    <ion-item>\\n                        <ion-label position=\\\"floating\\\">Email</ion-label>\\n                        <ion-input type=\\\"email\\\" name=\\\"email\\\"\\n                            pattern=\\\"[a-zA-Z0-9.-]{1,}@[a-zA-Z.-]{2,}[.]{1}[a-zA-Z]{2,5}\\\" [(ngModel)]=\\\"usuario.email\\\"\\n                            required></ion-input>\\n                    </ion-item>\\n\\n                    <ion-item>\\n                        <ion-label position=\\\"floating\\\">Puntuación</ion-label>\\n                        <ion-range pin=\\\"true\\\" type=\\\"range\\\" min=\\\"0\\\" max=\\\"10\\\" step=\\\"1\\\" snaps=\\\"true\\\" name=\\\"puntuacion\\\"\\n                            [(ngModel)]=\\\"usuario.puntuacion\\\" required>\\n                            <ion-label slot=\\\"start\\\">0</ion-label>\\n                            <ion-label slot=\\\"end\\\">10</ion-label>\\n                        </ion-range>\\n                    </ion-item>\\n                    <ion-item>\\n                        <ion-label position=\\\"floating\\\">Comentario</ion-label>\\n                        <ion-textarea name=\\\"comentario\\\" [(ngModel)]=\\\"usuario.comentario\\\"></ion-textarea>\\n                    </ion-item>\\n                    <ion-item>\\n                        <ion-button slot=\\\"start\\\" type=\\\"submit\\\" (click)=\\\"ejecutarFormulario(serie?.slug)\\\"\\n                            [disabled]=\\\"formulario.invalid\\\">Enviar Puntuación</ion-button>\\n                        <ion-button slot=\\\"end\\\" (click)=\\\"visualizaciones(false,true,true)\\\">Cancelar</ion-button>\\n                    </ion-item>\\n                </ion-list>\\n\\n            </form>\\n        </ion-card-content>\\n    </ion-card>\\n\\n    <div [hidden]=\\\"cardComentarios\\\">\\n        <ion-button expand=\\\"full\\\" color=\\\"warning\\\" fill=\\\"outline\\\" (click)=\\\"visualizaciones(false,true,true)\\\">Volver a la\\n            ficha de\\n            {{serie?.title}}</ion-button>\\n        <ion-title>Comentarios Recientes</ion-title>\\n        <ion-card *ngFor=\\\"let c of comentariosSerie\\\">\\n            <ion-card-content class=\\\"ion-padding\\\">\\n                <ion-grid>\\n                    <ion-row>\\n                        <ion-col size=\\\"2\\\">\\n                            <ion-thumbnail>\\n                                <img src=\\\"https://gravatar.com/avatar/dba6bae8c566f9d4041fb9cd9ada7741?d=identicon&f=y\\\">\\n                            </ion-thumbnail>\\n                        </ion-col>\\n                        <ion-col>\\n                            <ion-label><b>Fecha:</b> {{getFecha(c.fecha)}}</ion-label><br>\\n                            <ion-label><b>Email:</b> {{c.email}}</ion-label><br>\\n                            <ion-label><b>Comentario:</b>\\n                                <hr> {{c.comentario}}\\n                                <hr>\\n                            </ion-label>\\n                            <ion-label><b>Puntuación:</b> {{c.puntuacion}}</ion-label>\\n                        </ion-col>\\n                    </ion-row>\\n                </ion-grid>\\n                <hr>\\n                <ion-item *ngIf=\\\"username\\\">\\n                    <ion-button color=\\\"danger\\\" (click)=\\\"deleteComment(c)\\\" slot=\\\"end\\\">\\n                        <ion-icon name=\\\"trash\\\"></ion-icon>\\n                    </ion-button>\\n                </ion-item>\\n            </ion-card-content>\\n        </ion-card>\\n    </div>\\n\\n</ion-content>\";","export default \"<app-header></app-header>\\n\\n<ion-content>\\n\\n</ion-content>\\n\";","export default \"ion-card-title {\\n  text-align: center;\\n}\\n\\nion-card {\\n  text-align: center;\\n}\\n\\nion-item .center {\\n  text-align: center;\\n}\\n\\nh1 {\\n  text-align: center;\\n}\\n\\nion-title {\\n  text-align: center;\\n}\\n\\nhr {\\n  margin-top: 20px;\\n  margin-bottom: 20px;\\n  background: var(--ion-color-step-150, #d7d8da);\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvc2VyaWUvc2VyaWUucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksa0JBQUE7QUFDSjs7QUFDQTtFQUNJLGtCQUFBO0FBRUo7O0FBQ0E7RUFDSSxrQkFBQTtBQUVKOztBQUNBO0VBQ0ksa0JBQUE7QUFFSjs7QUFDQTtFQUNJLGtCQUFBO0FBRUo7O0FBQ0E7RUFDSSxnQkFBQTtFQUNBLG1CQUFBO0VBQ0EsOENBQUE7QUFFSiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL3NlcmllL3NlcmllLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImlvbi1jYXJkLXRpdGxlIHtcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuIH1cclxuaW9uLWNhcmQge1xyXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG59XHJcblxyXG5pb24taXRlbSAuY2VudGVyIHtcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxufVxyXG5cclxuaDEge1xyXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG59XHJcblxyXG5pb24tdGl0bGUge1xyXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG59XHJcblxyXG5ociB7XHJcbiAgICBtYXJnaW4tdG9wOiAyMHB4O1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMjBweDtcclxuICAgIGJhY2tncm91bmQ6IHZhcigtLWlvbi1jb2xvci1zdGVwLTE1MCwgI2Q3ZDhkYSk7XHJcbn0iXX0= */\";","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { AlertController, ToastController } from '@ionic/angular';\nimport { DataService } from 'src/app/services/data.service';\nimport { UserData } from 'src/app/services/userdata.service';\n\n@Component({\n  selector: 'app-serie',\n  templateUrl: './serie.page.html',\n  styleUrls: ['./serie.page.scss'],\n})\nexport class SeriePage implements OnInit {\n  username: any;\n  slug: any;\n  catSlug: any;\n\n  series: any;\n  serie: any;\n  categorias: any;\n\n  usuario = {\n    slug: '',\n    email: '',\n    puntuacion: '',\n    comentario: '',\n    fecha: Date.now()\n  };\n\n  puntuaciones: any;\n\n  comentariosSerie = [];\n\n  /* Para la visualizacion de las diferentes pantallas */\n  cardSerie = false;\n  cardForm = true;\n  cardComentarios = true;\n\n  constructor(private route: ActivatedRoute, private dataService: DataService, private alertCtrl: AlertController,\n    private toastController: ToastController, private router: Router, private userData: UserData) {\n    this.categorias = [];\n    this.series = [];\n    this.puntuaciones = [];\n  }\n\n  ngOnInit() {\n    this.getUsername();\n    this.dataService.getCategorias().subscribe(res => {\n      this.categorias = res;\n    });\n\n    /* Recojo las series del JSON */\n    this.dataService.getSeries().subscribe(res => {\n      const serieSlug = this.route.snapshot.paramMap.get('serieSlug'); //Recojo el enrutamiento necesario para la línea 16 del archivo series.routing.module\n      this.series = res; // Guardo las series\n\n      if (this.series) {\n        for (let i = 0; i < this.series.length; i++) {\n          if (this.series[i].slug === serieSlug) return this.serie = this.series[i]; // Guardo los datos de la serie requerida\n        }\n      }\n    });\n    this.getComentarios();\n  }\n\n  getComentarios () {\n    this.dataService.getComentarios().subscribe(res => {\n      this.puntuaciones = res;\n      for (let i = 0; i < this.puntuaciones.length; i++) {\n        if (this.puntuaciones[i].slug === this.serie.slug) {\n          this.comentariosSerie.push(this.puntuaciones[i]);\n        }\n      }\n      this.comentariosSerie.sort((a, b): any => {\n        if (a['fecha'] < b['fecha']) return 1;\n        if (a['fecha'] > b['fecha']) return -1;\n        return 0;\n      });\n    });\n  }\n\n  getUsername() {\n    this.userData.getUsername().then((username) => {\n      this.username = username;\n    });\n  }\n\n  /* Los datos para el slider */\n  slideOpts = {\n    initialSlide: 0,\n    slidesPerView: 1,\n    autoplay: true\n  };\n\n  mismaCategoria(cat) {\n    for (let i = 0; i < this.categorias.length; i++) {\n      if (cat == this.categorias[i].name) return this.catSlug = this.categorias[i].slug; // Si la categoría es la misma, devuelvo el slug de la categoría requerida\n    }\n  }\n\n  ejecutarFormulario(slugSerie) {\n    this.comentariosSerie.push(this.usuario);\n    /* Reordeno el listado de los comentarios */\n    this.comentariosSerie.sort((a, b): any => {\n      if (a['fecha'] < b['fecha']) return 1;\n      if (a['fecha'] > b['fecha']) return -1;\n      return 0;\n    });\n    this.usuario.slug = slugSerie;\n\n    this.dataService.postComentario(this.usuario).subscribe((response) => {\n      // this.router.navigate['comentarios']\n    });\n\n    /* Reinicio el formulario */\n    this.usuario = {\n      slug: '',\n      email: '',\n      puntuacion: '',\n      comentario: '',\n      fecha: Date.now()\n    };\n\n    this.visualizaciones(false, true, true);\n    this.mostrarToast();\n  }\n\n  async mostrarToast() {\n    const toast = await this.toastController.create({\n      message: 'Has puntuado la serie correctamente.',\n      duration: 2000\n    });\n    toast.present();\n  }\n\n  async mostrarToast2() {\n    const toast = await this.toastController.create({\n      message: 'Has eliminado el comentario correctamente.',\n      duration: 2000\n    });\n    toast.present();\n  }\n\n  getFecha(fecha) {\n    let date = new Date(fecha);\n    return date.getDate() + '-' + date.getMonth() + '-' + date.getFullYear() + ' ' + date.getHours() + ':' + date.getMinutes();\n  }\n\n  visualizaciones(ficha, form, comens) {\n    this.cardSerie = ficha;\n    this.cardForm = form;\n    this.cardComentarios = comens;\n  }\n\n  puntuacionTotal() {\n    if (this.comentariosSerie.length > 0) {\n      let total = 0;\n      for (let i = 0; i < this.comentariosSerie.length; i++) {\n        total += this.comentariosSerie[i].puntuacion;\n      }\n      return total / this.comentariosSerie.length;\n    }\n    else return \"Todavía no se ha puntuado\";\n  }\n\n  deleteComment(item) {\n    this.dataService.deleteComment(item.id).subscribe(res => {\n      this.comentariosSerie = []; // Reinicio el array\n      this.getComentarios();\n      this.mostrarToast2();\n    });\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { SeriePage } from '../serie/serie.page';\n\nimport { SeriesPage } from './series.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    children: [\n      {\n        path: '',\n        component: SeriesPage\n      },\n      {\n        path: ':serieSlug',\n        component: SeriePage,\n        loadChildren: () => import('../serie/serie.module').then(m => m.SeriePageModule)\n      }\n    ]\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class SeriesPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { SeriesPageRoutingModule } from './series-routing.module';\n\nimport { SeriesPage } from './series.page';\nimport { ComponentsModule } from 'src/app/components/components.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    SeriesPageRoutingModule,\n    ComponentsModule\n  ],\n  declarations: [SeriesPage]\n})\nexport class SeriesPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL3Nlcmllcy9zZXJpZXMucGFnZS5zY3NzIn0= */\";","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-series',\n  templateUrl: './series.page.html',\n  styleUrls: ['./series.page.scss'],\n})\nexport class SeriesPage implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n"]}