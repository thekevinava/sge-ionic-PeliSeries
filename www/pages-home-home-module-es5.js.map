{"version":3,"sources":["webpack:///src/app/pages/home/home.page.html","webpack:///src/app/pages/home/home-routing.module.ts","webpack:///src/app/pages/home/home.module.ts","webpack:///src/app/pages/home/home.page.scss","webpack:///src/app/pages/home/home.page.ts"],"names":["routes","path","component","HomePageRoutingModule","imports","forChild","exports","HomePageModule","declarations","HomePage","dataService","seriesFinal","cuenta","series","categorias","getCategorias","subscribe","res","getSeries","sort","a","b","addMoreItems","event","setTimeout","console","log","target","complete","length","disabled","i","push","cat","name","slug","selector","template"],"mappings":"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","file":"pages-home-home-module-es5.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-title color=\\\"success\\\">Inicio</ion-title>\\n    </ion-buttons>\\n    <ion-buttons class=\\\"ion-justify-content-center\\\">\\n      <ion-avatar>\\n        <ion-img src=\\\"/assets/Logo3.png\\\"></ion-img>\\n      </ion-avatar>\\n    </ion-buttons>\\n    <ion-buttons slot=\\\"end\\\">\\n      <ion-menu-button menu=\\\"menuPrincipal\\\" color=\\\"success\\\"></ion-menu-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-list>\\n    <ion-item *ngFor=\\\"let s of seriesFinal\\\">\\n      <ion-card style=\\\"width: 100%\\\">\\n        <ion-img [src]=\\\"s.images[0]\\\"></ion-img>\\n        <ion-card-header>\\n          <ion-card-title color=\\\"warning\\\">{{ s.title }}</ion-card-title>\\n        </ion-card-header>\\n        <ion-card-content>\\n          <ng-container *ngFor=\\\"let cat of s.categories;\\\">\\n            <ion-chip *ngIf=\\\"mismaCategoria(cat)\\\" routerLink=\\\"/categories/{{slug}}\\\" color=\\\"danger\\\">\\n              {{ cat }}\\n            </ion-chip>\\n          </ng-container>\\n          <ion-button href=\\\"/series/{{s.slug}}\\\" color=\\\"verdecito\\\" shape=\\\"round\\\" strong=\\\"true\\\" expand=\\\"block\\\">Ir</ion-button>\\n        </ion-card-content>\\n      </ion-card>\\n    </ion-item>\\n  </ion-list>\\n\\n  <ion-infinite-scroll threshold=\\\"100px\\\" (ionInfinite)=\\\"loadData($event)\\\">\\n    <ion-infinite-scroll-content loadingSpinner=\\\"bubbles\\\" loadingText=\\\"Cargando más series...\\\">\\n    </ion-infinite-scroll-content>\\n  </ion-infinite-scroll>\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { HomePage } from './home.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: HomePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class HomePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { HomePageRoutingModule } from './home-routing.module';\n\nimport { HomePage } from './home.page';\nimport { ComponentsModule } from 'src/app/components/components.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    HomePageRoutingModule,\n    ComponentsModule\n  ],\n  declarations: [HomePage]\n})\nexport class HomePageModule {}\n","export default \"ion-card ion-chip {\\n  background-color: #8ecae6;\\n}\\n\\nion-card {\\n  background-color: #023047;\\n  text-align: center;\\n}\\n\\nion-card-title {\\n  text-align: center;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvaG9tZS9ob21lLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLHlCQUFBO0FBQ0o7O0FBRUE7RUFDSSx5QkFBQTtFQUNBLGtCQUFBO0FBQ0o7O0FBRUE7RUFDSSxrQkFBQTtBQUNKIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvaG9tZS9ob21lLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImlvbi1jYXJkIGlvbi1jaGlwIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICM4ZWNhZTY7IC8vIGJsYWNrXHJcbn1cclxuXHJcbmlvbi1jYXJkIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICMwMjMwNDc7IC8vIGJsYWNrXHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbn1cclxuXHJcbmlvbi1jYXJkLXRpdGxlIHtcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuIH1cclxuIl19 */\";","import { Component, OnInit } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { Category, Componente, Serie } from 'src/app/interfaces/interfaces';\r\nimport { DataService } from 'src/app/services/data.service';\r\n\r\n@Component({\r\n  selector: 'app-home',\r\n  templateUrl: './home.page.html',\r\n  styleUrls: ['./home.page.scss'],\r\n})\r\nexport class HomePage implements OnInit {\r\n  slug: any; // Slug de la categoría mostrada en el card Serie\r\n\r\n  series: any; // Listado de series\r\n  seriesFinal = []; // Listado de series a mostrar con Infinite Scroll\r\n  categorias: any; // Listado de categorias\r\n\r\n  cuenta: number = 0;\r\n\r\n  constructor(private dataService: DataService) {\r\n    this.series = [];\r\n    this.categorias = [];\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.dataService.getCategorias().subscribe(res => {\r\n      this.categorias = res;\r\n    });\r\n\r\n    /* leo el JSON de las series y lo guardo directamente en un array */\r\n    this.dataService.getSeries().subscribe(res => {\r\n      this.series = res;\r\n      /* Ordeno las series de más recientes a más antiguas */\r\n      this.series.sort((a,b): any => {\r\n            if (a['year'] < b['year']) return 1;\r\n            if (a['year'] > b['year']) return -1;\r\n            return 0;\r\n          });\r\n      this.addMoreItems(); // Llamo a la variable que se encarga de publicar los elementos en home.page.html\r\n    });\r\n  }\r\n\r\n  /* Leo los datos del home.page.html respecto al Infinite Scroll */\r\n  loadData(event) {\r\n    setTimeout(() => {\r\n      console.log('Loaded');\r\n      this.addMoreItems(); // Cargo más datos si existen\r\n      event.target.complete(); // Completo la carga de datos\r\n      if (this.series.length === this.cuenta) event.target.disabled = true; // Si he completado la carga, desactivo el Infinite Scroll\r\n    }, 500);\r\n  }\r\n\r\n  addMoreItems() {\r\n    for (let i = 0; i < 4; i++) {\r\n      if (this.series.length === this.cuenta) return; // Si he completado la carga de datos, no añade más información innecesaria\r\n      this.seriesFinal.push(this.series[this.cuenta]);\r\n      this.cuenta++;\r\n    }\r\n  }\r\n\r\n  mismaCategoria(cat) {\r\n    for (let i = 0; i < this.categorias.length; i++) {\r\n      if (cat == this.categorias[i].name) return this.slug = this.categorias[i].slug; // Si la categoría es la misma, devuelvo el slug de la categoría requerida\r\n    }\r\n  }\r\n\r\n}\r\n"]}