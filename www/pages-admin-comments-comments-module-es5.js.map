{"version":3,"sources":["webpack:///src/app/pages/admin/comments/comments.page.html","webpack:///src/app/pages/admin/comments/comments-routing.module.ts","webpack:///src/app/pages/admin/comments/comments.module.ts","webpack:///src/app/pages/admin/comments/comments.page.scss","webpack:///src/app/pages/admin/comments/comments.page.ts"],"names":["routes","path","children","component","CommentsPageRoutingModule","imports","forChild","exports","CommentsPageModule","declarations","CommentsPage","dataService","userData","activatedRoute","toastController","serieData","commentsData","commentsSerie","getUsername","id","snapshot","params","getSerie","subscribe","res","getComentarios","i","length","slug","push","then","username","fecha","date","Date","getDate","getMonth","getFullYear","getHours","getMinutes","item","deleteComment","mostrarToast","create","message","duration","toast","present","selector","template"],"mappings":"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","file":"pages-admin-comments-comments-module-es5.js","sourcesContent":["export default \"<!-- <app-header titulo=\\\"Comentarios de {{serieData?.title}}\\\"></app-header> -->\\n\\n<ion-content class=\\\"ion-padding\\\">\\n  <ng-container *ngIf=\\\"username\\\">\\n    <ion-buttons>\\n      <ion-back-button color=\\\"warning\\\" text=\\\"Volver al listado de series\\\" defaultHref=\\\"/\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-back-button color=\\\"warning\\\" text=\\\"Volver al listado de series\\\" routerLink=\\\"/\\\">Volver al listado de series</ion-back-button>\\n    <!-- <ion-button expand=\\\"full\\\" color=\\\"warning\\\" fill=\\\"outline\\\" routerLinkActive=\\\"/\\\">Volver al listado de series</ion-button> -->\\n    <ion-item>\\n      <ion-label>Comentarios recientes de {{ serieData?.title }}</ion-label>\\n    </ion-item>\\n    <ion-card *ngFor=\\\"let c of commentsSerie\\\">\\n      <ion-card-content class=\\\"ion-padding\\\">\\n        <ion-grid>\\n            <ion-row>\\n                <ion-col size=\\\"3\\\">\\n                    <ion-thumbnail>\\n                        <img src=\\\"https://gravatar.com/avatar/dba6bae8c566f9d4041fb9cd9ada7741?d=identicon&f=y\\\">\\n                    </ion-thumbnail>\\n                </ion-col >\\n                <ion-col>\\n                    <ion-label><b>Fecha:</b> {{getFecha(c.fecha)}}</ion-label><br>\\n                    <ion-label><b>Email:</b> {{c.email}}</ion-label><br>\\n                    <ion-label><b>Comentario:</b>\\n                        <hr> {{c.comentario}}\\n                        <hr>\\n                    </ion-label>\\n                    <ion-label><b>Puntuaci√≥n:</b> {{c.puntuacion}}</ion-label>\\n                </ion-col>\\n            </ion-row>\\n            <hr>\\n            <ion-item>\\n              <ion-button (click)=\\\"delete(c)\\\" slot=\\\"end\\\"><ion-icon name=\\\"trash\\\"></ion-icon></ion-button>\\n            </ion-item>\\n        </ion-grid>\\n    </ion-card-content>\\n    </ion-card>\\n  </ng-container>\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { CommentsPage } from './comments.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    children: [\n      {\n        path: '',\n        component: CommentsPage\n      },\n      {\n        path: ':serieID',\n        component: CommentsPage\n      }\n    ]\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class CommentsPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { CommentsPageRoutingModule } from './comments-routing.module';\n\nimport { CommentsPage } from './comments.page';\nimport { ComponentsModule } from 'src/app/components/components.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    CommentsPageRoutingModule,\n    ComponentsModule\n  ],\n  declarations: [CommentsPage]\n})\nexport class CommentsPageModule {}\n","export default \"hr {\\n  margin-top: 20px;\\n  margin-bottom: 20px;\\n  background: var(--ion-color-step-150, #d7d8da);\\n}\\n\\nion-label {\\n  text-align: center;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvYWRtaW4vY29tbWVudHMvY29tbWVudHMucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksZ0JBQUE7RUFDQSxtQkFBQTtFQUNBLDhDQUFBO0FBQ0o7O0FBRUE7RUFDSSxrQkFBQTtBQUNKIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvYWRtaW4vY29tbWVudHMvY29tbWVudHMucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaHIge1xyXG4gICAgbWFyZ2luLXRvcDogMjBweDtcclxuICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XHJcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pb24tY29sb3Itc3RlcC0xNTAsICNkN2Q4ZGEpO1xyXG59XHJcblxyXG5pb24tbGFiZWwge1xyXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG59Il19 */\";","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { ToastController } from '@ionic/angular';\nimport { DataService } from 'src/app/services/data.service';\nimport { UserData } from 'src/app/services/userdata.service';\n\n@Component({\n  selector: 'app-comments',\n  templateUrl: './comments.page.html',\n  styleUrls: ['./comments.page.scss'],\n})\nexport class CommentsPage implements OnInit {\n  username: any;\n  serieData: any;\n  commentsData: any;\n  commentsSerie: any;\n\n  id: any;\n\n  constructor(private dataService: DataService, private userData: UserData, private activatedRoute: ActivatedRoute, private toastController: ToastController) { \n    this.serieData = [];\n    this.commentsData = [];\n    this.commentsSerie = [];\n  }\n\n  ngOnInit() {\n    this.getUsername();\n    this.id = this.activatedRoute.snapshot.params[\"serieID\"];\n    this.dataService.getSerie(this.id).subscribe(res => {\n      this.serieData = res;\n    });\n\n    this.getComentarios();\n  }\n\n  getComentarios() {\n    this.dataService.getComentarios().subscribe(res => {\n      this.commentsData = res;\n      for (let i = 0; i<this.commentsData.length;i++) {\n        if (this.serieData.slug === this.commentsData[i].slug) {\n          this.commentsSerie.push(this.commentsData[i]);\n        }\n      }\n    });\n  }\n\n  getUsername() {\n    this.userData.getUsername().then((username) => {\n      this.username = username;\n    });\n  }\n\n  getFecha(fecha) {\n    let date = new Date(fecha);\n    return date.getDate()+'-'+date.getMonth()+'-'+date.getFullYear()+' '+date.getHours()+':'+date.getMinutes();\n  }\n\n  delete(item) {\n    this.dataService.deleteComment(item.id).subscribe(res => {\n      this.commentsSerie = []; // Reinicio el array\n      this.getComentarios();\n      this.mostrarToast();\n    });\n  }\n\n  async mostrarToast() {\n    const toast = await this.toastController.create({\n      message: 'Has eliminado el comentario correctamente.',\n      duration: 2000\n    });\n    toast.present();\n  }\n\n}\n"]}