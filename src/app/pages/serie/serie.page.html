<app-header titulo="{{serie?.title}}"></app-header>

<ion-content>
    <ion-card [hidden]="cardSerie">
        <ion-slides [options]="slideOpts" pager="true">
            <ion-slide *ngFor="let s of serie?.images">
                <ion-img [src]="s"></ion-img>
            </ion-slide>
        </ion-slides>
        <ion-list>
            <ion-card-header>
                <ion-card-title color="warning">{{ serie?.title }}</ion-card-title>
                <ng-container *ngFor="let cat of serie?.categories;">
                    <ion-chip *ngIf="mismaCategoria(cat)" routerLink="/categories/{{catSlug}}" color="danger">
                        {{ cat }}
                    </ion-chip>
                </ng-container>
            </ion-card-header>
            <ion-card-content>
                <ion-item>
                    <ion-label color="secondary">Año de emisión: {{serie?.year}}</ion-label>
                </ion-item>
                <ion-item>
                    <ion-label color="primary" style="font-size: 30px;">Sinopsis:</ion-label>
                </ion-item>
                <ion-item>
                    {{serie?.sinopsis}}
                </ion-item>
                <ion-item>
                    <ion-label class="center" color="tertiary">Temporadas: {{serie?.seasons}}</ion-label>
                    <ion-label class="center" color="tertiary">Capítulos: {{serie?.episodes}}</ion-label>
                </ion-item>
                <ion-item>
                    Puntuación
                    <ion-badge style="margin-left: 20px;" color="verdecito">{{serie?.rating}}</ion-badge>
                </ion-item>
                <ion-item>
                    <ion-button (click)="puntuar()" slot="start">Puntuar</ion-button>
                    <ion-button (click)="mostrarComentarios()" slot="end">Ver Comentarios</ion-button>
                </ion-item>
            </ion-card-content>
        </ion-list>
    </ion-card>


    <ion-card [hidden]="cardForm">
        <ion-card-header>
            <ion-card-title>Puntua la serie</ion-card-title>
            <ion-card-subtitle>Añade una puntuación a {{serie?.title}}</ion-card-subtitle>
        </ion-card-header>
        <ion-card-content>
            <form #formulario="ngForm">
                <ion-list>
                    <ion-item>
                        <ion-label position="floating">Email</ion-label>
                        <ion-input type="email" name="email"
                            pattern="[a-zA-Z0-9.-]{1,}@[a-zA-Z.-]{2,}[.]{1}[a-zA-Z]{2,5}" [(ngModel)]="usuario.email"
                            required></ion-input>
                    </ion-item>
                    
                    <ion-item>
                        <ion-label position="floating">Puntuación</ion-label>
                        <!-- <ion-input pin="true" type="range" min="0" max="10" step="1" snaps="true" name="puntuacion" [(ngModel)]="usuario.puntuacion" required>
                        </ion-input> -->
                        <ion-range pin="true" type="range" min="0" max="10" step="1" snaps="true" name="puntuacion" [(ngModel)]="usuario.puntuacion" required>
                            <ion-label slot="start">0</ion-label>
                            <ion-label slot="end">10</ion-label>
                        </ion-range>
                    </ion-item>
                    <ion-item>
                        <ion-label position="floating">Comentario</ion-label>
                        <ion-input type="textarea" name="comentario" [(ngModel)]="usuario.comentario"></ion-input>
                    </ion-item>
                </ion-list>
                <ion-button type="submit" (click)="ejecutarFormulario(serie?.slug)" expand="full" [disabled]="formulario.invalid">Enviar Puntuación</ion-button>

            </form>
        </ion-card-content>
    </ion-card>

    <ion-card [hidden]="cardComentarios">
        <ion-card-header>Comentarios Recientes</ion-card-header>
    </ion-card>

</ion-content>